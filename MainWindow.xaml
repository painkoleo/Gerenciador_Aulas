<Window x:Class="GerenciadorAulas.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:GerenciadorAulas"
        Title="Gerenciador de Aulas 1.3.1"
        Height="720"
        Width="850"
        Background="#1e1e1e"
        Foreground="White">

    <Window.Resources>
        <!-- Zebra Converter -->
        <local:AlternatingRowBrushConverter x:Key="ZebraConverter"
                                            Brush1="#1e1e1e"
                                            Brush2="#2d2d2d"/>
    </Window.Resources>

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Linha superior: botão + caminho -->
        <StackPanel Orientation="Horizontal" Margin="0 0 0 10">
            <Button x:Name="BtnSelectFolder" Content="Selecionar Pasta" Width="140" Height="35" Margin="0 0 10 0" Background="#4a90e2" Foreground="White" FontWeight="Bold" Click="BtnSelectFolder_Click"/>
            <TextBox x:Name="txtFolderPath" Width="650" Height="35" IsReadOnly="True" VerticalContentAlignment="Center" Background="#333333" Foreground="White"/>
        </StackPanel>

        <!-- Barra de progresso -->
        <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0 0 0 10">
            <ProgressBar x:Name="progressBar" Height="25" Width="700" Minimum="0" Maximum="100" Foreground="#4a90e2" Background="#555555"/>
            <Label x:Name="lblProgress" Content="0%" Margin="10,0,0,0" VerticalAlignment="Center" FontWeight="Bold"/>
        </StackPanel>

        <!-- Botões de reprodução -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" Margin="0 0 0 10" HorizontalAlignment="Left">
            <Button x:Name="BtnPlayModule" Content="▶ Reproduzir Módulo" Width="180" Height="35" Background="#4CAF50" Foreground="White" FontWeight="Bold" Click="BtnPlayModule_Click"/>
            <Button x:Name="BtnPause" Content="⏸ Pausar" Width="120" Height="35" Margin="10,0,0,0" Background="#E53935" Foreground="White" FontWeight="Bold" Click="BtnPause_Click"/>
            <Button x:Name="BtnStop" Content="⏹ Parar" Width="120" Height="35" Margin="10,0,0,0" Background="#9E9E9E" Foreground="White" FontWeight="Bold" Click="BtnStop_Click"/>
        </StackPanel>

        <!-- Nome do vídeo atual -->
        <StackPanel Grid.Row="3" Orientation="Horizontal" Margin="0 0 0 10">
            <Label Content="Vídeo atual:" FontWeight="Bold" VerticalAlignment="Center" Width="120"/>
            <Label x:Name="lblVideoAtual" Content="" VerticalAlignment="Center" Foreground="#4a90e2" FontSize="14" FontWeight="Bold"/>
        </StackPanel>

        <!-- TreeView -->
        <TreeView x:Name="treeModules"
                  Grid.Row="4"
                  ItemsSource="{Binding TreeRoot}"
                  BorderBrush="#555555"
                  BorderThickness="1"
                  FontSize="14"
                  Background="#1e1e1e"
                  AlternationCount="2">
            <TreeView.ItemContainerStyle>
                <Style TargetType="TreeViewItem">
                    <Setter Property="IsExpanded" Value="False"/>
                </Style>
            </TreeView.ItemContainerStyle>

            <TreeView.Resources>
                <!-- Template para vídeos -->
                <DataTemplate DataType="{x:Type local:VideoItem}">
                    <Grid Background="{Binding RelativeSource={RelativeSource AncestorType=TreeViewItem}, Path=(ItemsControl.AlternationIndex), Converter={StaticResource ZebraConverter}}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="30"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- Checkbox -->
                        <CheckBox IsChecked="{Binding IsChecked, Mode=TwoWay}" VerticalAlignment="Center" Margin="5,0,0,0"/>

                        <!-- Nome do vídeo -->
                        <TextBlock Grid.Column="1" Text="{Binding Name}" VerticalAlignment="Center" Foreground="White" TextTrimming="CharacterEllipsis"/>
                    </Grid>
                </DataTemplate>

                <!-- Template para pastas -->
                <HierarchicalDataTemplate DataType="{x:Type local:FolderItem}" ItemsSource="{Binding Children}">
                    <Grid Background="{Binding RelativeSource={RelativeSource AncestorType=TreeViewItem}, Path=(ItemsControl.AlternationIndex), Converter={StaticResource ZebraConverter}}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="30"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- Checkbox -->
                        <CheckBox IsChecked="{Binding IsChecked, Mode=TwoWay}" VerticalAlignment="Center" Margin="5,0,0,0"/>

                        <!-- Nome da pasta -->
                        <TextBlock Grid.Column="1" Text="{Binding DisplayName}" VerticalAlignment="Center" Foreground="White" TextTrimming="CharacterEllipsis"/>
                    </Grid>
                </HierarchicalDataTemplate>
            </TreeView.Resources>
        </TreeView>
    </Grid>
</Window>
